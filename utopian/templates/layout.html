<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Utopian</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel=stylesheet type=text/css href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link
        href="https://cdn.pydata.org/bokeh/release/bokeh-0.12.14.min.css"
        rel="stylesheet" type="text/css">
    <link
        href="https://cdn.pydata.org/bokeh/release/bokeh-widgets-0.12.14.min.css"
        rel="stylesheet" type="text/css">
    <script src="https://cdn.pydata.org/bokeh/release/bokeh-0.12.14.min.js"></script>
    <script src="https://cdn.pydata.org/bokeh/release/bokeh-widgets-0.12.14.min.js"></script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
</head>
<body>
    {% include "navbar.html" %}
    <div class="container">
        {% block body %}
        {% endblock %}
    </div>
    <footer class="footer">
        <div class="container" style="text-align: center;">
            <span class="text-muted"><i>Made by <a href="https://steemit.com/@amosbastian/">@amosbastian</a> - Last updated <code>{{updated}}</code></i></span>
        </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.js" integrity="sha256-fNXJFIlca05BIO2Y5zh1xrShK3ME+/lYZ0j+ChxX2DA=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script>
        if (window.location.host === "utopian.rocks") {
            window.location.href = window.location.href.replace("utopian.rocks","utopian.info");
        }
        var reviewed = $("#reviews .moderator-feed-block").length;
        var limit = 10;
        $("#reviews .moderator-feed-block:gt(" + (limit - 1) + ")").hide();
        var pages = Math.ceil(reviewed / limit);
        $(".pagination").append("<li class='page-item current-page active'><a class='page-link' href='javascript:void(0)'>" + 1 + "</a></li>");

        for (var i = 2; i <= pages; i++) {
            $(".pagination").append("<li class='page-item current-page'><a class='page-link' href='javascript:void(0)'>" + i + "</a></li>");
        }

        $(".pagination").append("<li class='page-item next-page'><a class='page-link' href='javascript:void(0)'>Next</a></li>");
    
        $(".pagination li.current-page").on("click", function() {
            if($(this).hasClass("active")) {
                return false;
            } else {
                var current = $(this).index();
                $(".pagination li").removeClass("active");
                $(this).addClass("active");

                $("#reviews .moderator-feed-block").hide();

                var total = limit * current;
                for (var i = total - limit; i < total; i++) {
                    $("#reviews .moderator-feed-block:eq(" + i + ")").show();
                }
            }
        });

        $(".next-page").on("click", function () {
            var current = $(".pagination li.active").index();
            if (current === pages) {
                return false;
            } else {
                current++;
                $(".pagination li").removeClass("active");
                $("#reviews .moderator-feed-block").hide();
                var total = limit * current;
                for (var i = total - limit; i < total; i++) {
                    $("#reviews .moderator-feed-block:eq(" + i + ")").show();
                }
                $(".pagination li.current-page:eq(" + (current - 1) + ")").addClass("active");
            }
        });

        $(".previous-page").on("click", function () {
            var current = $(".pagination li.active").index();
            if (current === 1) {
                return false;
            } else {
                current--;
                $(".pagination li").removeClass("active");
                $("#reviews .moderator-feed-block").hide();
                var total = limit * current;
                for (var i = total - limit; i < total; i++) {
                    $("#reviews .moderator-feed-block:eq(" + i + ")").show();
                }
                $(".pagination li.current-page:eq(" + (current - 1) + ")").addClass("active");
            }
        });
    </script>
</body>
</html>
